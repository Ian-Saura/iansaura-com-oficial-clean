/**
 * FASE 11: MONITORING, LOGGING & OBSERVABILIDAD
 * 8 pasos para CloudWatch y observabilidad
 */
import { AWSStep } from '../types';

export const phase11Steps: AWSStep[] = [
  { id: 'aws-11-1', stepNumber: 87, title: { es: 'CloudWatch Metrics y Dashboards', en: 'CloudWatch Metrics and Dashboards', pt: 'CloudWatch Metrics e Dashboards' }, description: { es: 'Crear dashboards para monitorear pipelines.', en: 'Create dashboards to monitor pipelines.', pt: 'Criar dashboards para monitorar pipelines.' }, theory: { es: `## CloudWatch Metrics\n\n### MÃ©tricas clave para Data Engineering\n- **Glue**: glue.driver.aggregate.bytesRead, glue.driver.aggregate.recordsRead\n- **Athena**: ProcessedBytes, TotalExecutionTime\n- **Kinesis**: IncomingRecords, IteratorAgeMilliseconds\n- **S3**: NumberOfObjects, BucketSizeBytes\n\n### Custom Metrics\n\`\`\`python\nimport boto3\ncloudwatch = boto3.client('cloudwatch')\ncloudwatch.put_metric_data(\n    Namespace='DataPipeline',\n    MetricData=[{\n        'MetricName': 'RecordsProcessed',\n        'Value': 1000,\n        'Unit': 'Count'\n    }]\n)\n\`\`\`\n\n### Dashboard JSON\nPuedes exportar/importar dashboards como JSON para versionarlos.`, en: `## CloudWatch Metrics\n\n### Key metrics for Data Engineering\n- **Glue**: glue.driver.aggregate.bytesRead, glue.driver.aggregate.recordsRead\n- **Athena**: ProcessedBytes, TotalExecutionTime\n- **Kinesis**: IncomingRecords, IteratorAgeMilliseconds\n- **S3**: NumberOfObjects, BucketSizeBytes\n\n### Custom Metrics\n\`\`\`python\nimport boto3\ncloudwatch = boto3.client('cloudwatch')\ncloudwatch.put_metric_data(\n    Namespace='DataPipeline',\n    MetricData=[{\n        'MetricName': 'RecordsProcessed',\n        'Value': 1000,\n        'Unit': 'Count'\n    }]\n)\n\`\`\`\n\n### Dashboard JSON\nYou can export/import dashboards as JSON to version them.`, pt: `## CloudWatch Metrics\n\n### MÃ©tricas-chave para Data Engineering\n- **Glue**: glue.driver.aggregate.bytesRead, glue.driver.aggregate.recordsRead\n- **Athena**: ProcessedBytes, TotalExecutionTime\n- **Kinesis**: IncomingRecords, IteratorAgeMilliseconds\n- **S3**: NumberOfObjects, BucketSizeBytes\n\n### Custom Metrics\n\`\`\`python\nimport boto3\ncloudwatch = boto3.client('cloudwatch')\ncloudwatch.put_metric_data(\n    Namespace='DataPipeline',\n    MetricData=[{\n        'MetricName': 'RecordsProcessed',\n        'Value': 1000,\n        'Unit': 'Count'\n    }]\n)\n\`\`\`\n\n### Dashboard JSON\nVocÃª pode exportar/importar dashboards como JSON para versionÃ¡-los.` }, practicalTips: [{ es: 'ðŸ“Š Crea un dashboard por pipeline/dominio para mantener organizaciÃ³n', en: 'ðŸ“Š Create one dashboard per pipeline/domain to stay organized', pt: 'ðŸ“Š Crie um dashboard por pipeline/domÃ­nio para manter organizaÃ§Ã£o' }], externalLinks: [{ title: 'CloudWatch Metrics', url: 'https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/working_with_metrics.html', type: 'aws_docs' }], checkpoint: { es: 'âœ… Â¿Creaste un dashboard con mÃ©tricas de Glue y Athena?', en: 'âœ… Did you create a dashboard with Glue and Athena metrics?', pt: 'âœ… VocÃª criou um dashboard com mÃ©tricas de Glue e Athena?' }, xpReward: 55, estimatedMinutes: 35, services: ['CloudWatch'] },
  { id: 'aws-11-2', stepNumber: 88, title: { es: 'CloudWatch Logs', en: 'CloudWatch Logs', pt: 'CloudWatch Logs' }, description: { es: 'Centralizar y consultar logs de pipelines.', en: 'Centralize and query pipeline logs.', pt: 'Centralizar e consultar logs de pipelines.' }, theory: { es: `## CloudWatch Logs\n\n### Estructura\n- **Log Group**: Contenedor (ej: /aws/glue/jobs)\n- **Log Stream**: Flujo especÃ­fico (ej: job-run-id)\n- **Log Events**: Mensajes individuales\n\n### Logs Insights\n\`\`\`sql\nfields @timestamp, @message\n| filter @message like /ERROR/\n| sort @timestamp desc\n| limit 100\n\`\`\`\n\n### Subscription Filters\nEnviar logs en tiempo real a:\n- Lambda (procesamiento)\n- Kinesis (streaming)\n- OpenSearch (bÃºsqueda)\n\n### Retention\nConfigura retenciÃ³n para controlar costos:\n- 1 dÃ­a a 10 aÃ±os\n- Por defecto: Never expire (costoso!)`, en: `## CloudWatch Logs\n\n### Structure\n- **Log Group**: Container (e.g., /aws/glue/jobs)\n- **Log Stream**: Specific flow (e.g., job-run-id)\n- **Log Events**: Individual messages\n\n### Logs Insights\n\`\`\`sql\nfields @timestamp, @message\n| filter @message like /ERROR/\n| sort @timestamp desc\n| limit 100\n\`\`\`\n\n### Subscription Filters\nSend logs in real-time to:\n- Lambda (processing)\n- Kinesis (streaming)\n- OpenSearch (search)\n\n### Retention\nConfigure retention to control costs:\n- 1 day to 10 years\n- Default: Never expire (expensive!)`, pt: `## CloudWatch Logs\n\n### Estrutura\n- **Log Group**: Container (ex: /aws/glue/jobs)\n- **Log Stream**: Fluxo especÃ­fico (ex: job-run-id)\n- **Log Events**: Mensagens individuais\n\n### Logs Insights\n\`\`\`sql\nfields @timestamp, @message\n| filter @message like /ERROR/\n| sort @timestamp desc\n| limit 100\n\`\`\`\n\n### Subscription Filters\nEnviar logs em tempo real para:\n- Lambda (processamento)\n- Kinesis (streaming)\n- OpenSearch (busca)\n\n### Retention\nConfigure retenÃ§Ã£o para controlar custos:\n- 1 dia a 10 anos\n- PadrÃ£o: Never expire (caro!)` }, practicalTips: [{ es: 'ðŸ’° SIEMPRE configura retention - logs sin lÃ­mite son muy costosos', en: 'ðŸ’° ALWAYS configure retention - unlimited logs are very expensive', pt: 'ðŸ’° SEMPRE configure retenÃ§Ã£o - logs sem limite sÃ£o muito caros' }], externalLinks: [{ title: 'CloudWatch Logs', url: 'https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html', type: 'aws_docs' }], checkpoint: { es: 'âœ… Â¿Usaste Logs Insights para buscar errores?', en: 'âœ… Did you use Logs Insights to search for errors?', pt: 'âœ… VocÃª usou Logs Insights para buscar erros?' }, xpReward: 50, estimatedMinutes: 30, services: ['CloudWatch'] },
  { id: 'aws-11-3', stepNumber: 89, title: { es: 'CloudWatch Alarms', en: 'CloudWatch Alarms', pt: 'CloudWatch Alarms' }, description: { es: 'Configurar alertas para detectar problemas.', en: 'Configure alerts to detect problems.', pt: 'Configurar alertas para detectar problemas.' }, theory: { es: `## CloudWatch Alarms\n\n### Alertas recomendadas\n\`\`\`yaml\nAlerts:\n  GlueJobFailed:\n    Metric: glue.driver.job.failed\n    Threshold: >= 1\n    Period: 5 minutes\n    \n  AthenaHighCost:\n    Metric: ProcessedBytes\n    Threshold: > 1TB\n    Period: 1 hour\n    \n  KinesisLag:\n    Metric: IteratorAgeMilliseconds  \n    Threshold: > 60000\n    Period: 5 minutes\n\`\`\`\n\n### Acciones de alarma\n- SNS Topic â†’ Email/SMS\n- Lambda â†’ Auto-remediation\n- EventBridge â†’ Complex routing`, en: `## CloudWatch Alarms\n\n### Recommended alerts\n\`\`\`yaml\nAlerts:\n  GlueJobFailed:\n    Metric: glue.driver.job.failed\n    Threshold: >= 1\n    Period: 5 minutes\n    \n  AthenaHighCost:\n    Metric: ProcessedBytes\n    Threshold: > 1TB\n    Period: 1 hour\n    \n  KinesisLag:\n    Metric: IteratorAgeMilliseconds  \n    Threshold: > 60000\n    Period: 5 minutes\n\`\`\`\n\n### Alarm actions\n- SNS Topic â†’ Email/SMS\n- Lambda â†’ Auto-remediation\n- EventBridge â†’ Complex routing`, pt: `## CloudWatch Alarms\n\n### Alertas recomendados\n\`\`\`yaml\nAlerts:\n  GlueJobFailed:\n    Metric: glue.driver.job.failed\n    Threshold: >= 1\n    Period: 5 minutes\n    \n  AthenaHighCost:\n    Metric: ProcessedBytes\n    Threshold: > 1TB\n    Period: 1 hour\n    \n  KinesisLag:\n    Metric: IteratorAgeMilliseconds  \n    Threshold: > 60000\n    Period: 5 minutes\n\`\`\`\n\n### AÃ§Ãµes de alarme\n- SNS Topic â†’ Email/SMS\n- Lambda â†’ Auto-remediation\n- EventBridge â†’ Complex routing` }, practicalTips: [{ es: 'ðŸ”” Crea alarmas para fallos Y para anomalÃ­as (costos inesperados)', en: 'ðŸ”” Create alarms for failures AND anomalies (unexpected costs)', pt: 'ðŸ”” Crie alarmes para falhas E para anomalias (custos inesperados)' }], externalLinks: [{ title: 'CloudWatch Alarms', url: 'https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/AlarmThatSendsEmail.html', type: 'aws_docs' }], checkpoint: { es: 'âœ… Â¿Configuraste una alarma que te envÃ­a email cuando un job falla?', en: 'âœ… Did you configure an alarm that emails you when a job fails?', pt: 'âœ… VocÃª configurou um alarme que te envia email quando um job falha?' }, xpReward: 55, estimatedMinutes: 35, services: ['CloudWatch', 'SNS'] },
  { id: 'aws-11-4', stepNumber: 90, title: { es: 'AWS X-Ray para tracing', en: 'AWS X-Ray for tracing', pt: 'AWS X-Ray para tracing' }, description: { es: 'Tracing distribuido de pipelines.', en: 'Distributed tracing of pipelines.', pt: 'Tracing distribuÃ­do de pipelines.' }, theory: { es: `## AWS X-Ray\n\n### Â¿QuÃ© es?\nTracing distribuido para entender flujo de requests a travÃ©s de servicios.\n\n### Conceptos\n- **Trace**: Seguimiento completo de una request\n- **Segment**: Trabajo de un servicio\n- **Subsegment**: Operaciones dentro de un segmento\n\n### Habilitar en Lambda\n\`\`\`yaml\nLambda:\n  Tracing: Active\n\`\`\`\n\n### SDK Python\n\`\`\`python\nfrom aws_xray_sdk.core import xray_recorder\n\n@xray_recorder.capture('process_data')\ndef process_data(data):\n    # Tu cÃ³digo\n    pass\n\`\`\`\n\n### Service Map\nVisualiza dependencias entre servicios y cuellos de botella.`, en: `## AWS X-Ray\n\n### What is it?\nDistributed tracing to understand request flow through services.\n\n### Concepts\n- **Trace**: Complete tracking of a request\n- **Segment**: Work of a service\n- **Subsegment**: Operations within a segment\n\n### Enable in Lambda\n\`\`\`yaml\nLambda:\n  Tracing: Active\n\`\`\`\n\n### Python SDK\n\`\`\`python\nfrom aws_xray_sdk.core import xray_recorder\n\n@xray_recorder.capture('process_data')\ndef process_data(data):\n    # Your code\n    pass\n\`\`\`\n\n### Service Map\nVisualize dependencies between services and bottlenecks.`, pt: `## AWS X-Ray\n\n### O que Ã©?\nTracing distribuÃ­do para entender fluxo de requests atravÃ©s de serviÃ§os.\n\n### Conceitos\n- **Trace**: Rastreamento completo de uma request\n- **Segment**: Trabalho de um serviÃ§o\n- **Subsegment**: OperaÃ§Ãµes dentro de um segmento\n\n### Habilitar no Lambda\n\`\`\`yaml\nLambda:\n  Tracing: Active\n\`\`\`\n\n### SDK Python\n\`\`\`python\nfrom aws_xray_sdk.core import xray_recorder\n\n@xray_recorder.capture('process_data')\ndef process_data(data):\n    # Seu cÃ³digo\n    pass\n\`\`\`\n\n### Service Map\nVisualize dependÃªncias entre serviÃ§os e gargalos.` }, practicalTips: [{ es: 'ðŸ” X-Ray es invaluable para debuggear pipelines lentos o con errores', en: 'ðŸ” X-Ray is invaluable for debugging slow or failing pipelines', pt: 'ðŸ” X-Ray Ã© inestimÃ¡vel para debugar pipelines lentos ou com erros' }], externalLinks: [{ title: 'AWS X-Ray', url: 'https://docs.aws.amazon.com/xray/latest/devguide/aws-xray.html', type: 'aws_docs' }], checkpoint: { es: 'âœ… Â¿Habilitaste X-Ray en una Lambda y viste el service map?', en: 'âœ… Did you enable X-Ray on a Lambda and see the service map?', pt: 'âœ… VocÃª habilitou X-Ray em uma Lambda e viu o service map?' }, xpReward: 50, estimatedMinutes: 30, services: ['X-Ray'] },
  { id: 'aws-11-5', stepNumber: 91, title: { es: 'CloudTrail para auditorÃ­a', en: 'CloudTrail for auditing', pt: 'CloudTrail para auditoria' }, description: { es: 'Logging de todas las acciones en AWS.', en: 'Logging all actions in AWS.', pt: 'Logging de todas as aÃ§Ãµes na AWS.' }, theory: { es: `## CloudTrail\n\n### Â¿QuÃ© registra?\nTodas las llamadas API a AWS:\n- QuiÃ©n (usuario/rol)\n- QuÃ© (acciÃ³n)\n- CuÃ¡ndo (timestamp)\n- DÃ³nde (regiÃ³n)\n- Resultado (Ã©xito/fallo)\n\n### ConfiguraciÃ³n recomendada\n\`\`\`yaml\nTrail:\n  IsMultiRegionTrail: true\n  EnableLogFileValidation: true\n  IsLogging: true\n  S3BucketName: cloudtrail-logs\n  IncludeGlobalServiceEvents: true\n  DataEvents:\n    - S3\n    - Lambda\n\`\`\`\n\n### Query con Athena\nCloudTrail puede enviar a S3 y consultarse con Athena para anÃ¡lisis forense.`, en: `## CloudTrail\n\n### What does it record?\nAll API calls to AWS:\n- Who (user/role)\n- What (action)\n- When (timestamp)\n- Where (region)\n- Result (success/failure)\n\n### Recommended configuration\n\`\`\`yaml\nTrail:\n  IsMultiRegionTrail: true\n  EnableLogFileValidation: true\n  IsLogging: true\n  S3BucketName: cloudtrail-logs\n  IncludeGlobalServiceEvents: true\n  DataEvents:\n    - S3\n    - Lambda\n\`\`\`\n\n### Query with Athena\nCloudTrail can send to S3 and be queried with Athena for forensic analysis.`, pt: `## CloudTrail\n\n### O que registra?\nTodas as chamadas de API Ã  AWS:\n- Quem (usuÃ¡rio/role)\n- O quÃª (aÃ§Ã£o)\n- Quando (timestamp)\n- Onde (regiÃ£o)\n- Resultado (sucesso/falha)\n\n### ConfiguraÃ§Ã£o recomendada\n\`\`\`yaml\nTrail:\n  IsMultiRegionTrail: true\n  EnableLogFileValidation: true\n  IsLogging: true\n  S3BucketName: cloudtrail-logs\n  IncludeGlobalServiceEvents: true\n  DataEvents:\n    - S3\n    - Lambda\n\`\`\`\n\n### Query com Athena\nCloudTrail pode enviar para S3 e ser consultado com Athena para anÃ¡lise forense.` }, practicalTips: [{ es: 'ðŸ”’ CloudTrail es OBLIGATORIO para compliance - siempre habilÃ­talo', en: 'ðŸ”’ CloudTrail is MANDATORY for compliance - always enable it', pt: 'ðŸ”’ CloudTrail Ã© OBRIGATÃ“RIO para compliance - sempre habilite-o' }], externalLinks: [{ title: 'CloudTrail', url: 'https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-user-guide.html', type: 'aws_docs' }], checkpoint: { es: 'âœ… Â¿Configuraste un trail que registra eventos de S3?', en: 'âœ… Did you configure a trail that records S3 events?', pt: 'âœ… VocÃª configurou um trail que registra eventos do S3?' }, xpReward: 45, estimatedMinutes: 25, services: ['CloudTrail'] },
  { id: 'aws-11-6', stepNumber: 92, title: { es: 'Cost Explorer y budgets', en: 'Cost Explorer and budgets', pt: 'Cost Explorer e budgets' }, description: { es: 'Monitorear y controlar costos.', en: 'Monitor and control costs.', pt: 'Monitorar e controlar custos.' }, theory: { es: `## Cost Management\n\n### Cost Explorer\n- Vista por servicio/tag/cuenta\n- Forecast de costos\n- Recommendations de Savings Plans\n\n### Budgets efectivos para Data Engineering\n\`\`\`yaml\nBudgets:\n  - Name: Glue-Monthly\n    Amount: $500\n    Alerts: [50%, 80%, 100%]\n    \n  - Name: Athena-Monthly  \n    Amount: $100\n    Alerts: [80%, 100%, 120%]\n    \n  - Name: Total-Data-Platform\n    Amount: $2000\n    Tags: { CostCenter: data-platform }\n\`\`\`\n\n### Cost Allocation Tags\nEsencial para tracking por proyecto/equipo.`, en: `## Cost Management\n\n### Cost Explorer\n- View by service/tag/account\n- Cost forecast\n- Savings Plans recommendations\n\n### Effective budgets for Data Engineering\n\`\`\`yaml\nBudgets:\n  - Name: Glue-Monthly\n    Amount: $500\n    Alerts: [50%, 80%, 100%]\n    \n  - Name: Athena-Monthly  \n    Amount: $100\n    Alerts: [80%, 100%, 120%]\n    \n  - Name: Total-Data-Platform\n    Amount: $2000\n    Tags: { CostCenter: data-platform }\n\`\`\`\n\n### Cost Allocation Tags\nEssential for tracking by project/team.`, pt: `## Cost Management\n\n### Cost Explorer\n- VisualizaÃ§Ã£o por serviÃ§o/tag/conta\n- PrevisÃ£o de custos\n- RecomendaÃ§Ãµes de Savings Plans\n\n### Budgets efetivos para Data Engineering\n\`\`\`yaml\nBudgets:\n  - Name: Glue-Monthly\n    Amount: $500\n    Alerts: [50%, 80%, 100%]\n    \n  - Name: Athena-Monthly  \n    Amount: $100\n    Alerts: [80%, 100%, 120%]\n    \n  - Name: Total-Data-Platform\n    Amount: $2000\n    Tags: { CostCenter: data-platform }\n\`\`\`\n\n### Cost Allocation Tags\nEssencial para tracking por projeto/equipe.` }, practicalTips: [{ es: 'ðŸ’° Revisa Cost Explorer semanalmente - los costos de data pueden escalar rÃ¡pido', en: 'ðŸ’° Review Cost Explorer weekly - data costs can scale fast', pt: 'ðŸ’° Revise Cost Explorer semanalmente - custos de dados podem escalar rÃ¡pido' }], externalLinks: [{ title: 'Cost Explorer', url: 'https://docs.aws.amazon.com/cost-management/latest/userguide/ce-what-is.html', type: 'aws_docs' }], checkpoint: { es: 'âœ… Â¿Creaste budgets por servicio con alertas?', en: 'âœ… Did you create per-service budgets with alerts?', pt: 'âœ… VocÃª criou budgets por serviÃ§o com alertas?' }, xpReward: 45, estimatedMinutes: 25, services: ['Cost Explorer'] },
  { id: 'aws-11-7', stepNumber: 93, title: { es: 'Data Quality monitoring', en: 'Data Quality monitoring', pt: 'Monitoramento de Data Quality' }, description: { es: 'Monitorear calidad de datos en pipelines.', en: 'Monitor data quality in pipelines.', pt: 'Monitorar qualidade de dados em pipelines.' }, theory: { es: `## Data Quality Monitoring\n\n### AWS Glue Data Quality\n\`\`\`python\nfrom awsglue.data_quality import DQRuleset\n\nruleset = DQRuleset(\n    rules=[\n        'RowCount > 1000',\n        'Completeness "email" > 0.95',\n        'Uniqueness "id" = 1.0',\n        'ColumnValues "status" in ["active", "inactive"]'\n    ]\n)\n\`\`\`\n\n### MÃ©tricas de calidad\n- Completeness: % de valores no nulos\n- Uniqueness: % de valores Ãºnicos\n- Freshness: AntigÃ¼edad de datos\n- Accuracy: Conformidad con reglas\n\n### IntegraciÃ³n con CloudWatch\nPublica mÃ©tricas de calidad como custom metrics.`, en: `## Data Quality Monitoring\n\n### AWS Glue Data Quality\n\`\`\`python\nfrom awsglue.data_quality import DQRuleset\n\nruleset = DQRuleset(\n    rules=[\n        'RowCount > 1000',\n        'Completeness "email" > 0.95',\n        'Uniqueness "id" = 1.0',\n        'ColumnValues "status" in ["active", "inactive"]'\n    ]\n)\n\`\`\`\n\n### Quality metrics\n- Completeness: % of non-null values\n- Uniqueness: % of unique values\n- Freshness: Data age\n- Accuracy: Rule conformity\n\n### CloudWatch Integration\nPublish quality metrics as custom metrics.`, pt: `## Monitoramento de Data Quality\n\n### AWS Glue Data Quality\n\`\`\`python\nfrom awsglue.data_quality import DQRuleset\n\nruleset = DQRuleset(\n    rules=[\n        'RowCount > 1000',\n        'Completeness "email" > 0.95',\n        'Uniqueness "id" = 1.0',\n        'ColumnValues "status" in ["active", "inactive"]'\n    ]\n)\n\`\`\`\n\n### MÃ©tricas de qualidade\n- Completeness: % de valores nÃ£o nulos\n- Uniqueness: % de valores Ãºnicos\n- Freshness: Idade dos dados\n- Accuracy: Conformidade com regras\n\n### IntegraÃ§Ã£o com CloudWatch\nPublique mÃ©tricas de qualidade como custom metrics.` }, practicalTips: [{ es: 'ðŸ“Š La calidad de datos es tan importante como la observabilidad tÃ©cnica', en: 'ðŸ“Š Data quality is as important as technical observability', pt: 'ðŸ“Š Qualidade de dados Ã© tÃ£o importante quanto observabilidade tÃ©cnica' }], externalLinks: [{ title: 'Glue Data Quality', url: 'https://docs.aws.amazon.com/glue/latest/dg/data-quality.html', type: 'aws_docs' }], checkpoint: { es: 'âœ… Â¿Implementaste al menos 3 reglas de calidad en un job?', en: 'âœ… Did you implement at least 3 quality rules in a job?', pt: 'âœ… VocÃª implementou pelo menos 3 regras de qualidade em um job?' }, xpReward: 60, estimatedMinutes: 40, services: ['Glue'] },
  { id: 'aws-11-8', stepNumber: 94, title: { es: 'Runbooks y auto-remediation', en: 'Runbooks and auto-remediation', pt: 'Runbooks e auto-remediation' }, description: { es: 'Automatizar respuesta a incidentes.', en: 'Automate incident response.', pt: 'Automatizar resposta a incidentes.' }, theory: { es: `## Runbooks y Auto-Remediation\n\n### AWS Systems Manager Automation\n\`\`\`yaml\nRunbook: RestartGlueJob\n  Steps:\n    - name: CheckJobStatus\n      action: aws:executeAwsApi\n      inputs:\n        Service: glue\n        Api: GetJobRun\n        \n    - name: RestartIfFailed\n      action: aws:executeAwsApi\n      inputs:\n        Service: glue\n        Api: StartJobRun\n\`\`\`\n\n### Patrones de auto-remediation\n1. CloudWatch Alarm â†’ SNS â†’ Lambda â†’ Fix\n2. EventBridge Rule â†’ Step Functions â†’ Fix\n3. CloudWatch Alarm â†’ SSM Automation\n\n### CuÃ¡ndo automatizar\n- Errores conocidos con fix conocido\n- Escalado de recursos\n- Limpieza de archivos temporales`, en: `## Runbooks and Auto-Remediation\n\n### AWS Systems Manager Automation\n\`\`\`yaml\nRunbook: RestartGlueJob\n  Steps:\n    - name: CheckJobStatus\n      action: aws:executeAwsApi\n      inputs:\n        Service: glue\n        Api: GetJobRun\n        \n    - name: RestartIfFailed\n      action: aws:executeAwsApi\n      inputs:\n        Service: glue\n        Api: StartJobRun\n\`\`\`\n\n### Auto-remediation patterns\n1. CloudWatch Alarm â†’ SNS â†’ Lambda â†’ Fix\n2. EventBridge Rule â†’ Step Functions â†’ Fix\n3. CloudWatch Alarm â†’ SSM Automation\n\n### When to automate\n- Known errors with known fix\n- Resource scaling\n- Temporary file cleanup`, pt: `## Runbooks e Auto-Remediation\n\n### AWS Systems Manager Automation\n\`\`\`yaml\nRunbook: RestartGlueJob\n  Steps:\n    - name: CheckJobStatus\n      action: aws:executeAwsApi\n      inputs:\n        Service: glue\n        Api: GetJobRun\n        \n    - name: RestartIfFailed\n      action: aws:executeAwsApi\n      inputs:\n        Service: glue\n        Api: StartJobRun\n\`\`\`\n\n### PadrÃµes de auto-remediation\n1. CloudWatch Alarm â†’ SNS â†’ Lambda â†’ Fix\n2. EventBridge Rule â†’ Step Functions â†’ Fix\n3. CloudWatch Alarm â†’ SSM Automation\n\n### Quando automatizar\n- Erros conhecidos com fix conhecido\n- Escalamento de recursos\n- Limpeza de arquivos temporÃ¡rios` }, practicalTips: [{ es: 'ðŸ¤– Automatiza solo fixes que hayas validado manualmente primero', en: 'ðŸ¤– Only automate fixes you\'ve validated manually first', pt: 'ðŸ¤– Automatize sÃ³ fixes que vocÃª validou manualmente primeiro' }], externalLinks: [{ title: 'Systems Manager Automation', url: 'https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-automation.html', type: 'aws_docs' }], checkpoint: { es: 'âœ… Â¿Creaste una Lambda que reinicia un job fallido automÃ¡ticamente?', en: 'âœ… Did you create a Lambda that automatically restarts a failed job?', pt: 'âœ… VocÃª criou uma Lambda que reinicia um job que falhou automaticamente?' }, xpReward: 55, estimatedMinutes: 40, services: ['Systems Manager'] }
];








