/**
 * FASE 5: Delta Lake
 * 10 pasos para dominar Delta Lake
 */

import { DatabricksPhase } from '../types';

export const PHASE_5_DELTA_LAKE: DatabricksPhase = {
  id: 'db-phase-5',
  number: 5,
  title: { es: 'Delta Lake', en: 'Delta Lake', pt: 'Delta Lake' },
  subtitle: { es: 'El formato de datos m√°s poderoso', en: 'The most powerful data format', pt: 'O formato de dados mais poderoso' },
  description: { es: 'Domina Delta Lake: ACID transactions, time travel, schema enforcement, MERGE, OPTIMIZE, y Z-ordering.', en: 'Master Delta Lake: ACID transactions, time travel, schema enforcement, MERGE, OPTIMIZE, and Z-ordering.', pt: 'Domine Delta Lake: transa√ß√µes ACID, time travel, schema enforcement, MERGE, OPTIMIZE e Z-ordering.' },
  icon: 'üî∑',
  color: 'blue',
  estimatedDays: '5-7 d√≠as',
  steps: [
    { id: 'db-5-1', title: { es: '¬øQu√© es Delta Lake?', en: 'What is Delta Lake?', pt: 'O que √© Delta Lake?' }, description: { es: 'Introducci√≥n a Delta Lake y sus ventajas sobre Parquet.', en: 'Introduction to Delta Lake and its advantages over Parquet.', pt: 'Introdu√ß√£o ao Delta Lake e suas vantagens sobre Parquet.' },
      theory: { es: 'Delta Lake es un formato open-source que agrega transacciones ACID, time travel y schema enforcement a data lakes.', en: 'Delta Lake is an open-source format that adds ACID transactions, time travel and schema enforcement to data lakes.', pt: 'Delta Lake √© um formato open-source que adiciona transa√ß√µes ACID, time travel e schema enforcement a data lakes.' },
      practicalTips: [{ es: 'Delta Lake es open source, pero las optimizaciones avanzadas son exclusivas de Databricks.', en: 'Delta Lake is open source, but advanced optimizations are Databricks exclusive.', pt: 'Delta Lake √© open source, mas otimiza√ß√µes avan√ßadas s√£o exclusivas do Databricks.' }],
      externalLinks: [{ title: 'Delta Lake', url: 'https://delta.io/', type: 'docs' }],
      checkpoint: { es: '¬øQu√© problemas resuelve Delta Lake que Parquet no puede?', en: 'What problems does Delta Lake solve that Parquet cannot?', pt: 'Quais problemas o Delta Lake resolve que o Parquet n√£o consegue?' },
      xpReward: 20, estimatedMinutes: 20 },
    { id: 'db-5-2', title: { es: 'Crear y Escribir Tablas Delta', en: 'Create and Write Delta Tables', pt: 'Criar e Escrever Tabelas Delta' }, description: { es: 'Aprende las diferentes formas de crear tablas Delta.', en: 'Learn the different ways to create Delta tables.', pt: 'Aprenda as diferentes formas de criar tabelas Delta.' },
      theory: { es: 'Puedes crear tablas Delta desde DataFrames, SQL o convirtiendo tablas Parquet existentes.', en: 'You can create Delta tables from DataFrames, SQL or by converting existing Parquet tables.', pt: 'Voc√™ pode criar tabelas Delta de DataFrames, SQL ou convertendo tabelas Parquet existentes.' },
      practicalTips: [{ es: 'En Databricks, Delta es el formato default.', en: 'In Databricks, Delta is the default format.', pt: 'No Databricks, Delta √© o formato padr√£o.' }],
      externalLinks: [{ title: 'Delta Tables', url: 'https://docs.databricks.com/delta/index.html', type: 'docs' }],
      checkpoint: { es: '¬øCreaste una tabla Delta y verificaste que existe el _delta_log?', en: 'Did you create a Delta table and verify the _delta_log exists?', pt: 'Voc√™ criou uma tabela Delta e verificou que existe o _delta_log?' },
      xpReward: 25, estimatedMinutes: 25 },
    { id: 'db-5-3', title: { es: 'Time Travel: Viajar en el Tiempo', en: 'Time Travel: Travel Through Time', pt: 'Time Travel: Viagem no Tempo' }, description: { es: 'Accede a versiones anteriores de tus datos.', en: 'Access previous versions of your data.', pt: 'Acesse vers√µes anteriores dos seus dados.' },
      theory: { es: 'Time Travel permite leer versiones anteriores usando versionAsOf o timestampAsOf.', en: 'Time Travel allows reading previous versions using versionAsOf or timestampAsOf.', pt: 'Time Travel permite ler vers√µes anteriores usando versionAsOf ou timestampAsOf.' },
      practicalTips: [{ es: 'Time travel es perfecto para debugging y auditor√≠as.', en: 'Time travel is perfect for debugging and audits.', pt: 'Time travel √© perfeito para debugging e auditorias.' }],
      externalLinks: [{ title: 'Time Travel', url: 'https://docs.databricks.com/delta/history.html', type: 'docs' }],
      checkpoint: { es: '¬øViajaste a una versi√≥n anterior de tu tabla?', en: 'Did you travel to a previous version of your table?', pt: 'Voc√™ viajou para uma vers√£o anterior da sua tabela?' },
      xpReward: 30, estimatedMinutes: 25 },
    { id: 'db-5-4', title: { es: 'MERGE: Upserts en Delta', en: 'MERGE: Upserts in Delta', pt: 'MERGE: Upserts no Delta' }, description: { es: 'MERGE permite hacer INSERT, UPDATE y DELETE en una sola operaci√≥n.', en: 'MERGE allows INSERT, UPDATE and DELETE in a single operation.', pt: 'MERGE permite INSERT, UPDATE e DELETE em uma √∫nica opera√ß√£o.' },
      theory: { es: 'MERGE es la operaci√≥n m√°s importante de Delta Lake para sincronizaci√≥n de datos.', en: 'MERGE is the most important Delta Lake operation for data synchronization.', pt: 'MERGE √© a opera√ß√£o mais importante do Delta Lake para sincroniza√ß√£o de dados.' },
      practicalTips: [{ es: 'MERGE es m√°s eficiente que DELETE + INSERT separados.', en: 'MERGE is more efficient than separate DELETE + INSERT.', pt: 'MERGE √© mais eficiente que DELETE + INSERT separados.' }],
      externalLinks: [{ title: 'MERGE', url: 'https://docs.databricks.com/delta/merge.html', type: 'docs' }],
      checkpoint: { es: '¬øHiciste un upsert con MERGE?', en: 'Did you do an upsert with MERGE?', pt: 'Voc√™ fez um upsert com MERGE?' },
      xpReward: 35, estimatedMinutes: 30 },
    { id: 'db-5-5', title: { es: 'Schema Enforcement y Evolution', en: 'Schema Enforcement and Evolution', pt: 'Schema Enforcement e Evolution' }, description: { es: 'Controla c√≥mo cambia el schema de tus tablas.', en: 'Control how your tables schema changes.', pt: 'Controle como o schema das suas tabelas muda.' },
      theory: { es: 'Delta Lake protege tu tabla rechazando datos con schema incompatible, pero permite evoluci√≥n controlada.', en: 'Delta Lake protects your table by rejecting data with incompatible schema, but allows controlled evolution.', pt: 'Delta Lake protege sua tabela rejeitando dados com schema incompat√≠vel, mas permite evolu√ß√£o controlada.' },
      practicalTips: [{ es: 'Usa mergeSchema para agregar columnas nuevas autom√°ticamente.', en: 'Use mergeSchema to automatically add new columns.', pt: 'Use mergeSchema para adicionar colunas novas automaticamente.' }],
      externalLinks: [{ title: 'Schema', url: 'https://docs.databricks.com/delta/delta-batch.html#schema-enforcement', type: 'docs' }],
      checkpoint: { es: '¬øProbaste qu√© pasa cuando escribes datos con columnas nuevas?', en: 'Did you test what happens when writing data with new columns?', pt: 'Voc√™ testou o que acontece ao escrever dados com colunas novas?' },
      xpReward: 25, estimatedMinutes: 25 },
    { id: 'db-5-6', title: { es: 'OPTIMIZE: Compactaci√≥n de Archivos', en: 'OPTIMIZE: File Compaction', pt: 'OPTIMIZE: Compacta√ß√£o de Arquivos' }, description: { es: 'Mejora el rendimiento compactando archivos peque√±os.', en: 'Improve performance by compacting small files.', pt: 'Melhore o desempenho compactando arquivos pequenos.' },
      theory: { es: 'OPTIMIZE combina archivos peque√±os en archivos m√°s grandes para mejorar el rendimiento de lectura.', en: 'OPTIMIZE combines small files into larger files to improve read performance.', pt: 'OPTIMIZE combina arquivos pequenos em arquivos maiores para melhorar o desempenho de leitura.' },
      practicalTips: [{ es: 'Ejecuta OPTIMIZE regularmente en tablas con muchos appends.', en: 'Run OPTIMIZE regularly on tables with many appends.', pt: 'Execute OPTIMIZE regularmente em tabelas com muitos appends.' }],
      externalLinks: [{ title: 'OPTIMIZE', url: 'https://docs.databricks.com/delta/optimize.html', type: 'docs' }],
      checkpoint: { es: '¬øEjecutaste OPTIMIZE y viste la reducci√≥n de archivos?', en: 'Did you run OPTIMIZE and see the file reduction?', pt: 'Voc√™ executou OPTIMIZE e viu a redu√ß√£o de arquivos?' },
      xpReward: 30, estimatedMinutes: 25 },
    { id: 'db-5-7', title: { es: 'Z-Ordering: Data Skipping Avanzado', en: 'Z-Ordering: Advanced Data Skipping', pt: 'Z-Ordering: Data Skipping Avan√ßado' }, description: { es: 'Optimiza queries filtrando menos datos.', en: 'Optimize queries by filtering less data.', pt: 'Otimize queries filtrando menos dados.' },
      theory: { es: 'Z-ordering co-localiza datos relacionados para mejorar el data skipping en queries.', en: 'Z-ordering co-locates related data to improve data skipping in queries.', pt: 'Z-ordering co-localiza dados relacionados para melhorar o data skipping em queries.' },
      practicalTips: [{ es: 'Z-order por las columnas que m√°s usas en WHERE.', en: 'Z-order by the columns you use most in WHERE.', pt: 'Z-order pelas colunas que mais usa em WHERE.' }],
      externalLinks: [{ title: 'Z-Ordering', url: 'https://docs.databricks.com/delta/optimizations/file-mgmt.html#z-ordering-multi-dimensional-clustering', type: 'docs' }],
      checkpoint: { es: '¬øAplicaste Z-ordering y viste mejora en queries?', en: 'Did you apply Z-ordering and see improvement in queries?', pt: 'Voc√™ aplicou Z-ordering e viu melhoria em queries?' },
      xpReward: 30, estimatedMinutes: 25 },
    { id: 'db-5-8', title: { es: 'VACUUM: Limpieza de Archivos', en: 'VACUUM: File Cleanup', pt: 'VACUUM: Limpeza de Arquivos' }, description: { es: 'Elimina archivos antiguos para ahorrar espacio.', en: 'Remove old files to save space.', pt: 'Remova arquivos antigos para economizar espa√ßo.' },
      theory: { es: 'VACUUM elimina archivos que ya no son referenciados por ninguna versi√≥n reciente de la tabla.', en: 'VACUUM removes files that are no longer referenced by any recent version of the table.', pt: 'VACUUM remove arquivos que n√£o s√£o mais referenciados por nenhuma vers√£o recente da tabela.' },
      practicalTips: [{ es: 'Cuidado: despu√©s de VACUUM no puedes hacer time travel a versiones anteriores.', en: 'Careful: after VACUUM you cannot time travel to older versions.', pt: 'Cuidado: depois do VACUUM voc√™ n√£o pode fazer time travel para vers√µes anteriores.' }],
      externalLinks: [{ title: 'VACUUM', url: 'https://docs.databricks.com/delta/vacuum.html', type: 'docs' }],
      checkpoint: { es: '¬øEjecutaste VACUUM y verificaste el espacio liberado?', en: 'Did you run VACUUM and verify the freed space?', pt: 'Voc√™ executou VACUUM e verificou o espa√ßo liberado?' },
      xpReward: 25, estimatedMinutes: 20 },
    { id: 'db-5-9', title: { es: 'Change Data Feed (CDF)', en: 'Change Data Feed (CDF)', pt: 'Change Data Feed (CDF)' }, description: { es: 'Captura cambios incrementales en tus tablas.', en: 'Capture incremental changes in your tables.', pt: 'Capture mudan√ßas incrementais nas suas tabelas.' },
      theory: { es: 'CDF permite obtener solo los cambios (inserts, updates, deletes) desde la √∫ltima lectura.', en: 'CDF allows getting only the changes (inserts, updates, deletes) since the last read.', pt: 'CDF permite obter apenas as mudan√ßas (inserts, updates, deletes) desde a √∫ltima leitura.' },
      practicalTips: [{ es: 'CDF es perfecto para pipelines incrementales y CDC.', en: 'CDF is perfect for incremental pipelines and CDC.', pt: 'CDF √© perfeito para pipelines incrementais e CDC.' }],
      externalLinks: [{ title: 'CDF', url: 'https://docs.databricks.com/delta/delta-change-data-feed.html', type: 'docs' }],
      checkpoint: { es: '¬øHabilitaste CDF y le√≠ste los cambios?', en: 'Did you enable CDF and read the changes?', pt: 'Voc√™ habilitou CDF e leu as mudan√ßas?' },
      xpReward: 30, estimatedMinutes: 30 },
    { id: 'db-5-10', title: { es: 'Proyecto: Pipeline con Delta Lake', en: 'Project: Pipeline with Delta Lake', pt: 'Projeto: Pipeline com Delta Lake' }, description: { es: 'Construye un pipeline completo usando todas las features de Delta.', en: 'Build a complete pipeline using all Delta features.', pt: 'Construa um pipeline completo usando todas as features do Delta.' },
      theory: { es: 'En este proyecto aplicar√°s MERGE para upserts, OPTIMIZE para performance, y CDF para procesamiento incremental.', en: 'In this project you will apply MERGE for upserts, OPTIMIZE for performance, and CDF for incremental processing.', pt: 'Neste projeto voc√™ aplicar√° MERGE para upserts, OPTIMIZE para performance e CDF para processamento incremental.' },
      practicalTips: [{ es: 'Documenta tu pipeline para tu portfolio.', en: 'Document your pipeline for your portfolio.', pt: 'Documente seu pipeline para seu portf√≥lio.' }],
      externalLinks: [{ title: 'Delta Best Practices', url: 'https://docs.databricks.com/delta/best-practices.html', type: 'docs' }],
      checkpoint: { es: '¬øCompletaste el pipeline y funciona correctamente?', en: 'Did you complete the pipeline and does it work correctly?', pt: 'Voc√™ completou o pipeline e funciona corretamente?' },
      xpReward: 50, estimatedMinutes: 60 }
  ]
};
